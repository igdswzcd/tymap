{
  "bsonType": "object",
  "required": ["applicant_id", "request_type", "status"],
  "permission": {
    "read": true,
    "create": "auth.role[0] == 'admin' || doc.applicant_id == auth.openid",
    "update": "auth.role[0] == 'admin' || doc.reviewer_id == auth.openid",
    "delete": "auth.role[0] == 'admin' || doc.applicant_id == auth.openid"
  },
  "properties": {
    "_id": {
      "bsonType": "string",
      "description": "ID，系统自动生成"
    },
    "applicant_id": {
      "bsonType": "string",
      "description": "申请人ID"
    },
    "target_resident_id": {
      "bsonType": "string",
      "description": "目标住户ID"
    },
    "request_type": {
      "bsonType": "string",
      "description": "申请类型",
      "enum": ["family_owner", "unit_admin", "certification"]
    },
    "reason": {
      "bsonType": "string",
      "description": "申请理由"
    },
    "status": {
      "bsonType": "string",
      "description": "状态",
      "enum": ["pending", "approved", "rejected"]
    },
    "reviewer_id": {
      "bsonType": "string",
      "description": "审核人ID"
    },
    "review_time": {
      "bsonType": "timestamp",
      "description": "审核时间"
    },
    "review_comment": {
      "bsonType": "string",
      "description": "审核意见"
    },
    "create_time": {
      "bsonType": "timestamp",
      "description": "创建时间"
    },
    "update_time": {
      "bsonType": "timestamp",
      "description": "更新时间"
    }
  }
}